{
  "version": "https://jsonfeed.org/version/1.1",
  "title": "jcsherin",
  "language": "en",
  "home_page_url": "https://jacobsherin.com/",
  "feed_url": "https://example.com/feed/feed.json",
  "description": "jcsherin writes about programming",
  "author": {
    "name": "Your Name Here",
    "url": "https://example.com/about-me/"
  },
  "items": [{
      "id": "https://jacobsherin.com/posts/dremel-column-striping/",
      "url": "https://jacobsherin.com/posts/dremel-column-striping/",
      "title": "Flattening nested records into columns",
      "content_html": "<p>The representation of relational data in columnar format is intuitive. Each<br />\ncolumn value is stored contiguously. To reassemble a record all you need is<br />\nthe index of the value in a column.</p>\n<p>This is a logical representation of columnar storage for a relation with<br />\nfour columns - BookID, Title, Author &amp; Year.</p>\n<pre><code>BookIDs:    [101, 102, 103, 104]\nTitles:     [&quot;Deep Work&quot;, &quot;Designing Data-Intensive Applications&quot;, &quot;The Soul of A New Machine&quot;, &quot;Hackers &amp; Painters&quot;]\nAuthors:    [&quot;Cal Newport&quot;, &quot;Martin Kleppmann&quot;, &quot;Tracy Kidder&quot;, &quot;Paul Graham&quot;]\nYears:      [2016, 2017, 1981, 2004]\n</code></pre>\n<p>To reassemble the third record, the column values at index 2 are retrieved:</p>\n<pre><code>BookIDs[2]  = 103\nTitles[2]   = &quot;The Soul of A New Machine&quot;\nAuthors[2]  = &quot;Tracy Kidder&quot;\nYears[2]    = 1981\n</code></pre>\n<p>A nested value is a tree structure with values found at the leaf node. The<br />\ncolumn name is the path from root to leaf node. There are as many columns as<br />\nunique paths in the tree. Let us look at a sample nested value:</p>\n<pre><code>DocId: 10\nLinks\n  Forward: 20\n  Forward: 40\n  Forward: 60\nName\n  Language\n    Code: 'en-us'\n    Country: 'us'\n  Language\n    Code: 'en'\n  Url: 'http://A'\nName\n  Url: 'http://B'\nName\n  Language\n    Code: 'en-gb'\n    Country: 'gb'\n</code></pre>\n<p>This value has the following unique columns:</p>\n<ol>\n<li>DocId</li>\n<li>Links.Forward</li>\n<li>Name.Language.Code</li>\n<li>Name.Language.Country</li>\n<li>Name.Url</li>\n</ol>\n<p>After extracting the values from the leaf nodes it can be represented in a<br />\ncolumnar format like the relational data:</p>\n<pre><code>DocId:                [10]\nLinks.Forward:        [20, 40, 60]\nName.Language.Code:   ['en-us', 'en', 'en-gb']\nName.Language.Country:['us', 'gb']\nName.Url:             ['http://A', 'http://B']\n</code></pre>\n<p>In the above representation the structural information is lost. It is<br />\nimpossible to reassemble the nested value from the columns values like this:</p>\n<pre><code>Name[0].Language[0].Code[0] = 'en-us'\nName[0].Language[1].Code[0] = 'en'\nName[2].Language[0].Code[0] = 'en-gb'\n</code></pre>\n<p>Between 'en' and 'en-gb' the path Name[1] terminates early. This<br />\nrepresentation contains only values which are present in the value. It does<br />\nnot capture values which are missing because the path terminated early.</p>\n<p>TODO:</p>\n<p>-[ ] Data Model<br />\n-[ ] Missing Values<br />\n-[ ] Definition Levels<br />\n-[ ] Repetition Levels</p>\n<hr />\n<p>So how are nested values represented in columnar storage?</p>\n<p>This is one of the novel contributions from<br />\nthe <a href=\"https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/36632.pdf\">VLDB 2010 paper - Dremel: Interactive Analysis of<br />\nWeb-Scale Datasets</a>.</p>\n<blockquote>\n<p>We describe a novel columnar storage format for nested<br />\ndata. We present algorithms for dissecting nested records<br />\ninto columns and reassembling them.</p>\n</blockquote>\n<hr />\n<h2 id=\"scratch\" tabindex=\"-1\">Scratch <a class=\"direct-link\" href=\"https://jacobsherin.com/posts/dremel-column-striping/#scratch\" aria-hidden=\"true\">#</a></h2>\n<pre><code>Name\n Language\n  Code: 'en-us'\n  Country: 'us'\n Language\n  Code: 'en'\nName\nName\n Language\n  Code: 'en-gb'\n  Country: 'gb'\n</code></pre>\n<ul>\n<li>See both above and below are the same thing</li>\n<li>The bottom encoding looks weird because of the extra columns with some<br />\nnumbers. We'll soon get to how it is computed.</li>\n<li>Those numbers make it possible for us to reassemble the original nested<br />\nrecord shown above given the table below. It's neat!</li>\n<li>NULL is used to signal the absence of a value in the nested record.</li>\n<li>But why do we need this?</li>\n<li>Interactive ad-hoc querying using a database engine built for the purpose of<br />\nanalytics like ClickHouse, DuckDB etc. Not PostgreSQL or MySQL.</li>\n<li>Analytics queries are primarily aggregations. If you only need to find all<br />\nthe distinct Name.Language.Country you only need to read the Name.Language.<br />\nCountry column. Projections are efficient because you don't have to read<br />\nthe entire nested value just to get a single column.</li>\n<li>Adopted by Parquet/Arrow though the encoding differs slightly, the<br />\nprinciples remain the same. The principle is preserving the structure of<br />\nthe nested record</li>\n</ul>\n<div style=\"display: flex; gap: 16px;\">\n<div>\n<table>\n<thead>\n<tr>\n<th><strong>Name.Language.Country</strong></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>value</strong></td>\n<td><strong>r</strong></td>\n<td><strong>d</strong></td>\n</tr>\n<tr>\n<td>en-us</td>\n<td>0</td>\n<td>2</td>\n</tr>\n<tr>\n<td>en</td>\n<td>2</td>\n<td>2</td>\n</tr>\n<tr>\n<td>NULL</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>en-gb</td>\n<td>1</td>\n<td>2</td>\n</tr>\n<tr>\n<td>NULL</td>\n<td>0</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n</div>\n<div>\n<table>\n<thead>\n<tr>\n<th><strong>Name.Language.Code</strong></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>value</strong></td>\n<td><strong>r</strong></td>\n<td><strong>d</strong></td>\n</tr>\n<tr>\n<td>us</td>\n<td>0</td>\n<td>3</td>\n</tr>\n<tr>\n<td>NULL</td>\n<td>2</td>\n<td>2</td>\n</tr>\n<tr>\n<td>NULL</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>gb</td>\n<td>1</td>\n<td>3</td>\n</tr>\n<tr>\n<td>NULL</td>\n<td>0</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n",
      "date_published": "2025-04-04T00:00:00Z"
    },{
      "id": "https://jacobsherin.com/posts/fourthpost/",
      "url": "https://jacobsherin.com/posts/fourthpost/",
      "title": "This is my fourth post.",
      "content_html": "<p>Leverage agile frameworks to provide a robust synopsis for high level overviews. Iterative approaches to corporate strategy foster collaborative thinking to further the overall value proposition. Organically grow the holistic world view of disruptive innovation via workplace diversity and empowerment.</p>\n<p>Bring to the table win-win survival strategies to ensure proactive domination. At the end of the day, going forward, a new normal that has evolved from generation X is on the runway heading towards a streamlined cloud solution. User generated content in real-time will have multiple touchpoints for offshoring.</p>\n<h2 id=\"section-header\" tabindex=\"-1\">Section Header <a class=\"direct-link\" href=\"https://jacobsherin.com/posts/fourthpost/#section-header\" aria-hidden=\"true\">#</a></h2>\n<p>Capitalize on low hanging fruit to identify a ballpark value added activity to beta test. Override the digital divide with additional clickthroughs from DevOps. Nanotechnology immersion along the information highway will close the loop on focusing solely on the bottom line.</p>\n",
      "date_published": "2018-09-30T00:00:00Z"
    },{
      "id": "https://jacobsherin.com/posts/thirdpost/",
      "url": "https://jacobsherin.com/posts/thirdpost/",
      "title": "This is my third post.",
      "content_html": "<p>Leverage agile frameworks to provide a robust synopsis for high level overviews. Iterative approaches to corporate strategy foster collaborative thinking to further the overall value proposition. Organically grow the holistic world view of disruptive innovation via workplace diversity and empowerment.</p>\n<pre class=\"language-diff-js\"><code class=\"language-diff-js\">// this is a command<br />function myCommand() {<br /><span class=\"token inserted-sign inserted language-js\"><span class=\"token prefix inserted\">+</span>\t<span class=\"token keyword\">let</span> counter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><br /></span><br /><span class=\"token deleted-sign deleted language-js\"><span class=\"token prefix deleted\">-</span>\tcounter<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span><br /></span><br />}<br /><br />// Test with a line break above this line.<br />console.log('Test');</code></pre>\n<p>Bring to the table win-win survival strategies to ensure proactive domination. At the end of the day, going forward, a new normal that has evolved from generation X is on the runway heading towards a streamlined cloud solution. User generated content in real-time will have multiple touchpoints for offshoring.</p>\n<h2 id=\"section-header\" tabindex=\"-1\">Section Header <a class=\"direct-link\" href=\"https://jacobsherin.com/posts/thirdpost/#section-header\" aria-hidden=\"true\">#</a></h2>\n<p>Capitalize on low hanging fruit to identify a ballpark value added activity to beta test. Override the digital divide with additional clickthroughs from DevOps. Nanotechnology immersion along the information highway will close the loop on focusing solely on the bottom line.</p>\n",
      "date_published": "2018-08-24T00:00:00Z"
    },{
      "id": "https://jacobsherin.com/posts/secondpost/",
      "url": "https://jacobsherin.com/posts/secondpost/",
      "title": "This is my second post.",
      "content_html": "<p>Leverage agile frameworks to provide a robust synopsis for high level overviews. Iterative approaches to corporate strategy foster collaborative thinking to further the overall value proposition. Organically grow the holistic world view of disruptive innovation via workplace diversity and empowerment.</p>\n<h2 id=\"section-header\" tabindex=\"-1\">Section Header <a class=\"direct-link\" href=\"https://jacobsherin.com/posts/secondpost/#section-header\" aria-hidden=\"true\">#</a></h2>\n<p><a href=\"https://jacobsherin.com/posts/firstpost/\">First post</a><br />\n<a href=\"https://jacobsherin.com/posts/thirdpost/\">Third post</a></p>\n<p>Bring to the table win-win survival strategies to ensure proactive domination. At the end of the day, going forward, a new normal that has evolved from generation X is on the runway heading towards a streamlined cloud solution. User generated content in real-time will have multiple touchpoints for offshoring.</p>\n<p>Capitalize on low hanging fruit to identify a ballpark value added activity to beta test. Override the digital divide with additional clickthroughs from DevOps. Nanotechnology immersion along the information highway will close the loop on focusing solely on the bottom line.</p>\n",
      "date_published": "2018-07-04T00:00:00Z"
    },{
      "id": "https://jacobsherin.com/posts/firstpost/",
      "url": "https://jacobsherin.com/posts/firstpost/",
      "title": "This is my first post.",
      "content_html": "<p>Leverage agile frameworks to provide a robust synopsis for high level overviews. Iterative approaches to corporate strategy foster collaborative thinking to further the overall value proposition. Organically grow the holistic world view of disruptive innovation via workplace diversity and empowerment.</p>\n<p>Bring to the table win-win survival strategies to ensure proactive domination. At the end of the day, going forward, a new normal that has evolved from generation X is on the runway heading towards a streamlined cloud solution. User generated content in real-time will have multiple touchpoints for offshoring.</p>\n<h2 id=\"section-header\" tabindex=\"-1\">Section Header <a class=\"direct-link\" href=\"https://jacobsherin.com/posts/firstpost/#section-header\" aria-hidden=\"true\">#</a></h2>\n<p>Capitalize on low hanging fruit to identify a ballpark value added activity to beta test. Override the digital divide with additional clickthroughs from DevOps. Nanotechnology immersion along the information highway will close the loop on focusing solely on the bottom line.</p>\n<pre class=\"language-diff-js\"><code class=\"language-diff-js\">// this is a command<br />function myCommand() {<br /><span class=\"token inserted-sign inserted language-js\"><span class=\"token prefix inserted\">+</span>\t<span class=\"token keyword\">let</span> counter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><br /><span class=\"token prefix inserted\">+</span>\tcounter<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span><br /></span>}<br /><br />// Test with a line break above this line.<br />console.log('Test');</code></pre>\n",
      "date_published": "2018-05-01T00:00:00Z"
    }
  ]
}
